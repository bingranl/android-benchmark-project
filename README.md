# android-benchmark-project

This is a large multi-module project with generated kotlin(mostly) and java source code, which is aimed for profiling Gradle build performance. 

The main app of this project is `:module21:module02`, so `":module21:module02:compileDebugJavaWithJavac"` task is used when profiling with [Gradle profiler](https://github.com/gradle/gradle-profiler) in build scenarios like [incremental.scenarios](https://github.com/bingranl/android-benchmark-project/blob/main/incremental.scenarios) and with [kotlin-benchmark-tool](https://github.com/bingranl/kotlin-build-benchmarks) in [scenarios](https://github.com/bingranl/kgp-profiler-executor/blob/main/app/src/main/kotlin/com/example/foo/App.kt) from [kgp-profiler-executor](https://github.com/bingranl/kgp-profiler-executor). 


With Gradle profiler, you are able to get wall clock time for `total_build`, `configuration`, `execution` and cpu time for `up_to_date_check`. To profile build performance for incremental build scenarios without configuration caching, execute command from the root directory this project. `gradle-profiler --benchmark --measure-config-time --scenario-file incremental_non_config_cache.scenarios  --project-dir .`. For same build scenarios but with configration caching, execute `gradle-profiler --benchmark --measure-config-time --scenario-file incremental.scenarios  --project-dir .`.

With [kotlin-benchmark-tool](https://github.com/bingranl/kotlin-build-benchmarks), you are able to get wall clock time for `total_build`, `configuration`, `execution` and cup time for `up_to-date_check`, `compilation_tasks`, `kotlin_compile`, `java_compile`, etc. Checkout [kotlin-build-benchmark-tool(forked_version)](https://github.com/bingranl/kotlin-build-benchmarks) and publish it to maven local, use [kgp-profiler-executor](https://github.com/bingranl/kgp-profiler-executor) to trigger the kotlin-build-benchmark tool to run the build. In the root directory of the executor project, run command `.gradlew run -Dproject.path=‚Äùthe path to the root of android-benchmark-project"`. In this case, you are not able to obtain build data with configuration caching as kgp doesn't fully support profiling with config caching.
